{
  "chapter_id": "retry-configuration",
  "chapter_title": "Retry Configuration",
  "chapter_file": "book/src/retry-configuration.md",
  "drift_detected": true,
  "severity": "critical",
  "quality_assessment": "Chapter is currently a placeholder with no actual content. The codebase has extensive retry functionality across multiple modules that needs comprehensive documentation.",
  "issues": [
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "Entire Chapter",
      "description": "Chapter contains only a placeholder note and topic list - no actual documentation exists",
      "current_content": "Note: This chapter is currently being auto-generated by the book-docs-drift workflow. Content will be populated based on the latest codebase implementation.",
      "should_be": "Complete chapter documenting retry configuration with examples, code samples, and usage patterns",
      "fix_suggestion": "Write comprehensive chapter covering all retry features found in src/cook/retry_v2.rs and src/cook/workflow/error_policy.rs",
      "source_reference": "src/cook/retry_v2.rs, src/cook/workflow/error_policy.rs"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "RetryConfig Struct",
      "description": "RetryConfig struct fields not documented",
      "should_add": "Document RetryConfig with all fields: attempts, backoff, initial_delay, max_delay, jitter, jitter_factor, retry_on, retry_budget, on_failure",
      "fix_suggestion": "Add section explaining RetryConfig struct with YAML examples showing how to configure each field",
      "source_reference": "src/cook/retry_v2.rs:16-52"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Backoff Strategies",
      "description": "BackoffStrategy enum variants not documented",
      "should_add": "Document all backoff strategies: Fixed, Linear, Exponential, Fibonacci, Custom with examples of each",
      "fix_suggestion": "Add comprehensive section with YAML examples for each backoff strategy showing parameters and use cases",
      "source_reference": "src/cook/retry_v2.rs:70-98"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Default Values",
      "description": "Default retry values not documented",
      "should_add": "Document defaults: attempts=3, initial_delay=1s, max_delay=30s, jitter_factor=0.3, exponential_base=2.0, backoff=Exponential",
      "fix_suggestion": "Add table or list showing all default values so users know what happens if they don't specify configuration",
      "source_reference": "src/cook/retry_v2.rs:443-461"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Conditional Retry (ErrorMatcher)",
      "description": "ErrorMatcher patterns for conditional retry not documented",
      "should_add": "Document retry_on field with ErrorMatcher variants: Network, Timeout, ServerError, RateLimit, Pattern(regex)",
      "fix_suggestion": "Add section on conditional retry with examples showing how to retry only on specific error types",
      "source_reference": "src/cook/retry_v2.rs:100-151"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Jitter Configuration",
      "description": "Jitter feature for distributed systems not documented",
      "should_add": "Document jitter boolean flag and jitter_factor (0.0 to 1.0) for adding randomness to retry delays",
      "fix_suggestion": "Explain why jitter is important for distributed systems (avoiding thundering herd) with examples",
      "source_reference": "src/cook/retry_v2.rs:33-39, 308-317"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Retry Budget",
      "description": "Retry budget time limit feature not documented",
      "should_add": "Document retry_budget field for setting maximum total time for all retry attempts",
      "fix_suggestion": "Add section explaining retry_budget with examples showing how it prevents indefinite retry loops",
      "source_reference": "src/cook/retry_v2.rs:45-47, 238-244"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Failure Actions",
      "description": "FailureAction enum for post-retry behavior not documented",
      "should_add": "Document on_failure field with actions: Stop, Continue, Fallback{command}",
      "fix_suggestion": "Add section explaining what happens after all retries are exhausted",
      "source_reference": "src/cook/retry_v2.rs:153-165"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Circuit Breaker Integration",
      "description": "Circuit breaker capability not documented",
      "should_add": "Document RetryExecutor::with_circuit_breaker() for preventing cascading failures",
      "fix_suggestion": "Add advanced section on circuit breaker integration with retry logic",
      "source_reference": "src/cook/retry_v2.rs:185-188, 325-397"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Workflow-Level vs Command-Level Retry",
      "description": "Two different retry systems not explained",
      "should_add": "Clarify difference between workflow-level RetryConfig (error_policy.rs) and enhanced retry (retry_v2.rs)",
      "fix_suggestion": "Add section explaining when to use each retry system and how they differ",
      "source_reference": "src/cook/workflow/error_policy.rs:91-129 vs src/cook/retry_v2.rs:14-52"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "YAML Examples",
      "description": "No YAML configuration examples provided",
      "should_add": "Add multiple YAML examples showing different retry configurations",
      "fix_suggestion": "Include examples: basic retry, exponential backoff, fibonacci sequence, conditional retry, retry budget, jitter enabled",
      "source_reference": "src/cook/retry_v2.rs (serde annotations show YAML structure)"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Humantime Format",
      "description": "Duration format not explained",
      "should_add": "Document that durations use humantime format (e.g., '1s', '30s', '5m')",
      "fix_suggestion": "Add note about humantime_serde format for initial_delay, max_delay, and retry_budget",
      "source_reference": "src/cook/retry_v2.rs:26-47 (humantime_serde annotations)"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Command Metadata Retries",
      "description": "Command-level retry override not documented",
      "should_add": "Document CommandMetadata.retries field for overriding workflow-level retry settings",
      "fix_suggestion": "Explain how per-command retry counts can override global settings",
      "source_reference": "src/config/command.rs:135"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Retry Metrics",
      "description": "RetryMetrics for observability not documented",
      "should_add": "Document retry metrics: total_attempts, successful_attempts, failed_attempts, retries history",
      "fix_suggestion": "Add section on monitoring retry behavior with metrics",
      "source_reference": "src/cook/retry_v2.rs:399-422"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Best Practices",
      "description": "No guidance on choosing retry strategies",
      "should_add": "Add best practices: when to use exponential vs fibonacci, setting appropriate max_delay, using jitter",
      "fix_suggestion": "Include recommendations section with common patterns and anti-patterns",
      "source_reference": "Based on implementation capabilities"
    }
  ],
  "positive_aspects": [
    "Topics list is comprehensive and accurate",
    "Chapter structure placeholder indicates awareness of needed content",
    "Auto-generation note sets appropriate expectations"
  ],
  "improvement_suggestions": [
    "Start with simple example showing basic retry configuration",
    "Build up to complex examples with multiple features combined",
    "Include comparison table of backoff strategies with delay sequences",
    "Add troubleshooting section for common retry configuration issues",
    "Provide examples of retry_on patterns for different error types",
    "Show real-world use cases (network requests, flaky tests, rate-limited APIs)",
    "Explain relationship to error handling chapter",
    "Add diagram showing retry flow with backoff",
    "Include performance considerations (retry budgets, max delays)"
  ],
  "metadata": {
    "analyzed_at": "2025-10-10",
    "feature_inventory": "Direct codebase analysis (features.json not available)",
    "topics_covered": [
      "Retry defaults",
      "Backoff strategies",
      "Exponential backoff",
      "Fibonacci backoff",
      "Retry budget",
      "Conditional retry",
      "Jitter"
    ],
    "validation_focus": "Check retry configuration options match RetryConfig struct and backoff strategies are documented",
    "code_modules_analyzed": [
      "src/cook/retry_v2.rs",
      "src/cook/workflow/error_policy.rs",
      "src/config/command.rs"
    ]
  }
}
