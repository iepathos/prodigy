{
  "item_type": "chapter",
  "chapter_id": "troubleshooting",
  "chapter_title": "Troubleshooting",
  "chapter_file": "book/src/troubleshooting/index.md",
  "drift_detected": true,
  "severity": "critical",
  "quality_assessment": "Chapter is nearly empty with critical missing content. Users will encounter common issues with no guidance on resolution. The existing debugging practices are outdated and don't reference modern observability features.",
  "issues": [
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "Common Issues",
      "description": "Section header exists but contains no content. Features.json documents 9 common issues with detailed symptoms, causes, and solutions that are completely missing.",
      "feature_reference": "troubleshooting.common_issues",
      "fix_suggestion": "Add all 9 common issues from features.json: Variables not interpolating, MapReduce items not found, Timeout errors, Checkpoint resume not working, DLQ items not retrying, Worktree cleanup failures, Environment variables not resolved, Git context variables empty, Claude command not found",
      "source_reference": "features.json:697-807 - troubleshooting.common_issues array"
    },
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "Debug Tips",
      "description": "Section header exists but contains no content. Features.json documents 7 debugging techniques with specific commands and use cases.",
      "feature_reference": "troubleshooting.debugging_techniques",
      "fix_suggestion": "Add all 7 debugging techniques: Verbose mode, Claude JSON logs, Event log inspection, DLQ review, Checkpoint state checking, Worktree git log examination, Real-time log tailing",
      "source_reference": "features.json:808-851 - troubleshooting.debugging_techniques array"
    },
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "FAQ",
      "description": "FAQ subsection file (faq.md) exists but is completely empty with only a heading",
      "fix_suggestion": "Populate FAQ with common questions derived from troubleshooting issues, such as 'How do I debug variable interpolation?', 'What should I do when checkpoint resume fails?', 'How do I retry failed DLQ items?'",
      "source_reference": "features.json:697-851 - derive FAQs from common_issues and debugging_techniques"
    },
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "Common Error Messages",
      "description": "Common Error Messages subsection file (common-error-messages.md) exists but is completely empty with only a heading",
      "fix_suggestion": "Document specific error messages users encounter, such as 'checkpoint not found', 'items.json not found', 'command not found', timeout errors, permission denied, etc. with explanations and solutions",
      "source_reference": "features.json:697-807 - extract error messages from common_issues symptoms"
    },
    {
      "type": "outdated_information",
      "severity": "high",
      "section": "Best Practices for Debugging",
      "description": "Debugging practices reference outdated storage locations and don't mention modern observability features",
      "current_content": "Check logs and state: Review event logs (`~/.prodigy/events/`) and session state (`.prodigy/session_state.json`)",
      "should_be": "Check logs and state: Review event logs (`~/.prodigy/events/{repo_name}/{job_id}/`), unified sessions (`~/.prodigy/sessions/{session-id}.json`), and checkpoints (`~/.prodigy/state/{repo_name}/mapreduce/jobs/{job_id}/`)",
      "fix_suggestion": "Update practice #4 to reference correct storage paths with repo_name and job_id structure",
      "source_reference": "storage_architecture.global_storage.structure in features.json:486-493"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Best Practices for Debugging",
      "description": "No mention of Claude JSON logs (Spec 121, Spec 126) which are critical for debugging Claude command failures",
      "feature_reference": "observability.claude_json_logs",
      "fix_suggestion": "Add practice: 'View Claude JSON logs: Use `prodigy logs --latest` or check `~/.local/state/claude/logs/` for detailed Claude interaction logs including tool invocations and token usage'",
      "source_reference": "features.json:522-544 - observability.claude_json_logs"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Best Practices for Debugging",
      "description": "No mention of using DLQ commands for debugging MapReduce failures",
      "feature_reference": "storage_architecture.dlq",
      "fix_suggestion": "Add practice: 'Review DLQ for MapReduce failures: Use `prodigy dlq show <job_id>` to see failed items with error details and json_log_location for debugging'",
      "source_reference": "features.json:502-520 - storage_architecture.dlq"
    },
    {
      "type": "outdated_information",
      "severity": "medium",
      "section": "Best Practices for Debugging",
      "description": "Practice #7 mentions 'prodigy dlq list' but the correct command is 'prodigy dlq show'",
      "current_content": "Check DLQ regularly: Monitor failed items with `prodigy dlq list` and retry when appropriate",
      "should_be": "Check DLQ regularly: Monitor failed items with `prodigy dlq show <job_id>` and retry with `prodigy dlq retry <job_id>`",
      "fix_suggestion": "Update command reference to use correct 'prodigy dlq show' and add retry command",
      "source_reference": "observability.dlq_commands in features.json:557-560"
    },
    {
      "type": "incomplete_explanation",
      "severity": "medium",
      "section": "Best Practices for Debugging",
      "description": "Practice #3 suggests using echo for debugging variables, but doesn't mention better alternatives",
      "fix_suggestion": "Expand practice to mention capturing outputs with capture_output and using variable interpolation debugging with -v verbose mode",
      "source_reference": "advanced_features.output_capture in features.json:321-333"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Index",
      "description": "Index file has empty 'Common Issues' and 'Debug Tips' sections that should either have content or link to subsections",
      "fix_suggestion": "Either populate these sections with overview content and link to subsections, or move all content to dedicated subsection files and use the index only for navigation",
      "source_reference": "N/A - structural issue"
    }
  ],
  "positive_aspects": [
    "Multi-subsection structure is well-organized with clear separation of concerns (FAQ, Common Error Messages, Debugging Practices)",
    "Best Practices for Debugging section provides a good starting framework with 14 numbered practices",
    "Cross-references to subsections are properly formatted with relative links"
  ],
  "improvement_suggestions": [
    "Add comprehensive common issues section with all 9 issues from features.json, each with symptoms, causes, and solutions",
    "Populate FAQ with frequently asked questions derived from common issues",
    "Document specific error messages with explanations and resolutions",
    "Update debugging practices to reference modern storage architecture and observability features",
    "Add examples of using prodigy logs, prodigy events, and prodigy dlq commands for debugging",
    "Include troubleshooting decision tree: 'If X happens, check Y, then try Z'",
    "Add links to relevant chapters for deeper dive (e.g., link to MapReduce Checkpoint and Resume when discussing checkpoint issues)",
    "Consider adding a 'Quick Diagnosis' section for common symptoms pointing to specific issues",
    "Add screenshots or example outputs where helpful (e.g., what a DLQ entry looks like)"
  ],
  "metadata": {
    "analyzed_at": "2025-01-11T00:00:00Z",
    "feature_inventory": ".prodigy/book-analysis/features.json",
    "topics_covered": [
      "Common issues",
      "Debug tips",
      "FAQ"
    ],
    "validation_focus": "Check troubleshooting covers common user issues"
  }
}
