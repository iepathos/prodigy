{
  "item_type": "chapter",
  "chapter_id": "troubleshooting",
  "chapter_title": "Troubleshooting",
  "chapter_file": "book/src/troubleshooting/index.md",
  "drift_detected": true,
  "severity": "medium",
  "quality_assessment": "The troubleshooting chapter is well-structured and covers most common issues accurately. However, it has some broken references to non-existent documentation pages and could benefit from coverage of additional error scenarios present in the codebase.",
  "issues": [
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Common Error Messages",
      "description": "Missing documentation for workflow composition and template-related errors",
      "feature_reference": "workflow_composition.template_system",
      "fix_suggestion": "Add section covering template parameter errors, template not found, invalid extends syntax, and circular dependency errors in composition",
      "source_reference": "src/cli/template.rs, src/cli/workflow_generator.rs"
    },
    {
      "type": "broken_reference",
      "severity": "high",
      "section": "Troubleshooting Index",
      "description": "References non-existent documentation page: '../advanced-features/environment-variables.md'",
      "current_content": "See [Environment Variables](../advanced-features/environment-variables.md)",
      "should_be": "See [Environment Configuration](../environment/index.md)",
      "fix_suggestion": "Update reference to point to existing environment configuration chapter",
      "source_reference": "book/src/troubleshooting/index.md:133"
    },
    {
      "type": "broken_reference",
      "severity": "high",
      "section": "Troubleshooting Index",
      "description": "References non-existent documentation page: '../advanced-features/git-context-variables.md'",
      "current_content": "See [Git Context Variables](../advanced-features/git-context-variables.md)",
      "should_be": "See [Advanced Git Context](../git-context-advanced.md)",
      "fix_suggestion": "Update reference to point to existing advanced git context chapter",
      "source_reference": "book/src/troubleshooting/index.md:152"
    },
    {
      "type": "broken_reference",
      "severity": "high",
      "section": "Troubleshooting Index",
      "description": "References non-existent documentation page: '../observability/claude-json-logs.md'",
      "current_content": "See [Claude JSON Logs](../observability/claude-json-logs.md)",
      "should_be": "Reference should point to section in CLAUDE.md or be removed",
      "fix_suggestion": "Remove reference or document claude-json-logs as a proper chapter since this is a key feature (Spec 121, 126)",
      "source_reference": "book/src/troubleshooting/index.md:191"
    },
    {
      "type": "broken_reference",
      "severity": "high",
      "section": "FAQ",
      "description": "References non-existent documentation page: '../advanced-features/environment-variables.md'",
      "current_content": "See [Environment Variables](../advanced-features/environment-variables.md)",
      "should_be": "See [Environment Configuration](../environment/index.md)",
      "fix_suggestion": "Update reference to point to existing environment configuration chapter",
      "source_reference": "book/src/troubleshooting/faq.md:147"
    },
    {
      "type": "broken_reference",
      "severity": "high",
      "section": "FAQ",
      "description": "References non-existent documentation page: '../observability/claude-json-logs.md'",
      "current_content": "See [Claude JSON Logs](../observability/claude-json-logs.md)",
      "should_be": "Reference should point to section in CLAUDE.md or be removed",
      "fix_suggestion": "Remove reference or document claude-json-logs as a proper chapter",
      "source_reference": "book/src/troubleshooting/faq.md:92"
    },
    {
      "type": "broken_reference",
      "severity": "medium",
      "section": "Troubleshooting Index",
      "description": "References non-existent documentation page: '../mapreduce/cleanup-failure-handling.md'",
      "current_content": "See [Cleanup Failure Handling](../mapreduce/cleanup-failure-handling.md)",
      "should_be": "Document cleanup failure handling in MapReduce chapter or reference Spec 136",
      "fix_suggestion": "Add cleanup-failure-handling.md subsection to MapReduce chapter documenting orphaned worktree registry and cleanup strategies",
      "source_reference": "book/src/troubleshooting/index.md:114"
    },
    {
      "type": "broken_reference",
      "severity": "medium",
      "section": "FAQ",
      "description": "References non-existent documentation page: '../mapreduce/cleanup-failure-handling.md'",
      "current_content": "See [Cleanup Failure Handling](../mapreduce/cleanup-failure-handling.md)",
      "should_be": "Document cleanup failure handling in MapReduce chapter",
      "fix_suggestion": "Create cleanup-failure-handling.md subsection in MapReduce chapter",
      "source_reference": "book/src/troubleshooting/faq.md:126"
    },
    {
      "type": "broken_reference",
      "severity": "medium",
      "section": "Common Error Messages",
      "description": "References non-existent documentation page: '../mapreduce/concurrent-resume-protection.md'",
      "current_content": "See [Concurrent Resume Protection](../mapreduce/concurrent-resume-protection.md)",
      "should_be": "Document concurrent resume protection feature (Spec 140) or reference checkpoint-and-resume.md",
      "fix_suggestion": "Add subsection about concurrent resume protection to MapReduce Checkpoint and Resume chapter",
      "source_reference": "book/src/troubleshooting/common-error-messages.md:114"
    },
    {
      "type": "broken_reference",
      "severity": "medium",
      "section": "Troubleshooting Index",
      "description": "References non-existent documentation page: '../mapreduce/dead-letter-queue.md' (incorrect filename)",
      "current_content": "See [Dead Letter Queue](../mapreduce/dead-letter-queue.md)",
      "should_be": "See [Dead Letter Queue (DLQ)](../mapreduce/dead-letter-queue-dlq.md)",
      "fix_suggestion": "Update reference to use correct filename with -dlq suffix",
      "source_reference": "book/src/troubleshooting/index.md:94"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Common Issues",
      "description": "Missing troubleshooting for workflow template and composition errors",
      "feature_reference": "advanced_features.workflow_composition",
      "fix_suggestion": "Add section covering template parameter validation errors, template not found, circular dependencies, and invalid extends syntax",
      "source_reference": "src/cli/template.rs, src/config/template.rs"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Debug Tips",
      "description": "Missing tip for using dry-run mode to preview workflow execution",
      "feature_reference": "workflow_basics.execution_model",
      "fix_suggestion": "Add debug tip: 'Use dry-run mode to preview workflow execution: prodigy run workflow.yml --dry-run'",
      "source_reference": "src/cli/args.rs:64"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Common Issues",
      "description": "Missing troubleshooting for foreach command errors",
      "feature_reference": "command_types.foreach",
      "fix_suggestion": "Add section covering foreach iteration failures, parallel execution issues, and continue_on_error behavior",
      "source_reference": "src/config/command.rs:ForeachCommand"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "FAQ - Where are event logs stored?",
      "description": "Example command 'prodigy events list' shown but actual command structure not verified",
      "current_content": "prodigy events list <job_id>",
      "should_be": "Verify actual CLI command structure from src/cli/events/mod.rs",
      "fix_suggestion": "Confirm events CLI subcommands and update examples to match actual implementation",
      "source_reference": "src/cli/events/mod.rs:EventsCommand"
    }
  ],
  "positive_aspects": [
    "Comprehensive coverage of MapReduce-specific issues (checkpoint resume, DLQ, worktree cleanup)",
    "Clear categorization by symptom, cause, and solution",
    "Good use of code examples for commands and debugging",
    "Accurate references to storage locations (~/.prodigy paths)",
    "Well-organized structure with index, FAQ, common error messages, and best practices",
    "Covers concurrent resume protection (Spec 140)",
    "Accurate CLI command examples for dlq, logs, worktree cleanup",
    "Good coverage of variable interpolation issues",
    "Includes JSON log location debugging with jq examples"
  ],
  "improvement_suggestions": [
    "Fix all broken documentation references to point to existing pages",
    "Add troubleshooting section for workflow composition and templates",
    "Create missing subsections referenced in the chapter (cleanup-failure-handling.md, concurrent-resume-protection.md, observability/claude-json-logs.md)",
    "Add dry-run mode to debug tips section",
    "Include troubleshooting for foreach command failures",
    "Verify and update CLI command examples to match actual implementation",
    "Add troubleshooting for error_collection_strategies and circuit_breaker features",
    "Include examples of analyzing retry metrics and observability data",
    "Add section on debugging conditional execution (when clauses)",
    "Include troubleshooting for profile-specific configuration issues"
  ],
  "metadata": {
    "analyzed_at": "2025-01-11T00:00:00Z",
    "feature_inventory": ".prodigy/book-analysis/features.json",
    "topics_covered": [
      "Common issues",
      "Debug tips",
      "FAQ",
      "Error messages",
      "Variable interpolation",
      "MapReduce failures",
      "Checkpoint resume",
      "DLQ retry",
      "Worktree cleanup",
      "Environment variables",
      "Claude logs",
      "Event tracking"
    ],
    "validation_focus": "Check troubleshooting covers common user issues"
  }
}
