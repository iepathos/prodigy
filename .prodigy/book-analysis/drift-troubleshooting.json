{
  "chapter_id": "troubleshooting",
  "chapter_title": "Troubleshooting",
  "chapter_file": "book/src/troubleshooting.md",
  "drift_detected": true,
  "severity": "low",
  "quality_assessment": "Chapter is comprehensive and accurate, covering common user issues with good explanations and actionable solutions. Minor improvements could enhance clarity and add missing edge cases.",
  "issues": [
    {
      "type": "outdated_information",
      "severity": "medium",
      "section": "Error Policy Configuration Issues (Line 209-235)",
      "description": "Chapter shows BackoffStrategy values that don't match the actual enum implementation. Documentation shows 'constant', 'linear', 'exponential', 'fibonacci' as values, but code uses 'Fixed', 'Linear', 'Exponential', 'Fibonacci' with different structures.",
      "current_content": "- `constant` - Same delay every time\n- `linear` - Increases linearly\n- `exponential` - Doubles each time\n- `fibonacci` - Fibonacci sequence",
      "should_be": "- `fixed` - Same delay every time\n- `linear` - Increases linearly with increment parameter\n- `exponential` - Multiplies by base each time (default 2.0)\n- `fibonacci` - Fibonacci sequence\n- `custom` - Custom delay array",
      "fix_suggestion": "Update BackoffStrategy enum values to match the actual implementation in src/cook/retry_v2.rs. Show correct YAML structure with parameters (e.g., 'exponential: { base: 2.0 }' instead of just 'exponential').",
      "source_reference": "src/cook/retry_v2.rs:270-302 (BackoffStrategy enum and calculate_delay implementation)"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "MapReduce Error Messages (Line 383-404)",
      "description": "Chapter documents MapReduceError types but doesn't cover all variants available in the codebase. Missing several error types that users might encounter.",
      "should_add": "Document additional error types: CheckpointCorrupted, DeadlockDetected, ConcurrentModification, InvalidJsonPath, EnvironmentError, ValidationFailed, DlqError, ProcessingError",
      "fix_suggestion": "Add a comprehensive list of all MapReduceError variants from src/cook/execution/errors.rs with descriptions and recovery actions.",
      "source_reference": "src/cook/execution/errors.rs:14-162 (MapReduceError enum with all variants)"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "Merge Workflow Timeout (Line 157-184)",
      "description": "Chapter correctly shows two merge formats but states timeout uses duration string format ('600s'). The MergeWorkflow struct actually uses u64 seconds.",
      "current_content": "timeout: \"600s\"  # Duration string format",
      "should_be": "timeout: 600  # Timeout in seconds (u64 number, not duration string)",
      "fix_suggestion": "Clarify that merge.timeout takes a number in seconds (u64), not a duration string like most other timeout fields.",
      "source_reference": "src/config/mapreduce.rs:MergeWorkflow (timeout field is Option<u64>)"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "DLQ Commands (Line 307-322)",
      "description": "Chapter documents 'prodigy dlq list' and 'prodigy dlq inspect' commands, but these exact commands may not exist in the CLI implementation.",
      "should_add": "Verify actual DLQ CLI commands available and document correct usage",
      "fix_suggestion": "Check CLI implementation to ensure documented commands match actual available commands. Update examples if necessary.",
      "source_reference": "CLI command implementation needs verification"
    }
  ],
  "positive_aspects": [
    "Comprehensive coverage of common issues users encounter",
    "Clear symptom-cause-solution structure makes troubleshooting easy to follow",
    "Excellent debug tips section with practical examples",
    "Good coverage of verbosity flags and their uses",
    "Well-organized FAQ section addresses key questions",
    "Capture streams documentation is accurate and helpful",
    "Variable interpolation troubleshooting is clear and actionable",
    "Timeout configuration examples are helpful",
    "Error policy section provides good guidance despite minor inaccuracies"
  ],
  "improvement_suggestions": [
    "Add more examples of error messages users might see in practice",
    "Include troubleshooting steps for workspace/worktree issues",
    "Add section on debugging MapReduce parallel execution issues",
    "Include common git merge conflict scenarios and resolutions",
    "Add troubleshooting for environment variable inheritance issues",
    "Consider adding a 'Quick Diagnosis' flowchart at the beginning",
    "Add links to related chapters for deeper understanding",
    "Include troubleshooting for checkpoint corruption and recovery"
  ],
  "metadata": {
    "analyzed_at": "2025-10-05",
    "feature_inventory": ".prodigy/book-analysis/features.json (not found, analyzed from source code)",
    "topics_covered": [
      "Variable interpolation issues",
      "Capture format problems",
      "Validation and goal-seeking failures",
      "MapReduce JSONPath issues",
      "Timeout configuration",
      "Environment variables",
      "Merge workflow issues",
      "Error handling and policies",
      "Debug tips and techniques",
      "Common error messages",
      "DLQ operations",
      "Checkpoint and resume errors"
    ],
    "validation_focus": "Check troubleshooting covers common user issues"
  }
}
