{
  "item_type": "auto-discovered",
  "page_id": "dead-letter-queue-dlq",
  "page_title": "dead letter queue dlq",
  "page_file": "docs/mapreduce/dead-letter-queue-dlq.md",
  "drift_detected": true,
  "severity": "low",
  "quality_assessment": "Good documentation with minor issues. The page accurately documents DLQ functionality with comprehensive detail. Missing one ErrorType variant and has minor accuracy issues with source references.",
  "issues": [
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Error Types",
      "description": "Missing ErrorType::CommitValidationFailed variant in documentation",
      "feature_reference": "error_handling.dead_letter_queue",
      "fix_suggestion": "Add CommitValidationFailed to the Error Types section: 'CommitValidationFailed: Commit validation failed - required commit was not created'",
      "source_reference": "src/cook/execution/dlq.rs:71-72"
    },
    {
      "type": "outdated_information",
      "severity": "low",
      "section": "Storage Structure",
      "description": "Storage structure example shows incorrect nested path. Documentation shows '~/.prodigy/dlq/{repo_name}/{job_id}/mapreduce/dlq/{job_id}/' but actual GlobalStorage uses '~/.prodigy/dlq/{repo_name}/{job_id}/' and DLQStorage adds 'mapreduce/dlq/{job_id}/' subdirectory",
      "current_content": "~/.prodigy/dlq/{repo_name}/{job_id}/mapreduce/dlq/{job_id}/",
      "should_be": "The actual path structure is: GlobalStorage provides ~/.prodigy/dlq/{repo_name}/{job_id}/, and DLQStorage adds mapreduce/dlq/{job_id}/ resulting in the full path",
      "fix_suggestion": "Clarify the path structure explanation is accurate as documented - the note about backward compatibility already explains this correctly",
      "source_reference": "src/storage/global.rs:46-54 and src/cook/execution/dlq.rs:535-537"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "Failure Detail Fields",
      "description": "FailureDetail has error_context field (Vec<String>) for context trail that is not documented",
      "feature_reference": "error_handling.dead_letter_queue",
      "fix_suggestion": "Add error_context field to FailureDetail documentation: 'error_context: Optional context trail showing operation stack for debugging (Vec<String>)'",
      "source_reference": "src/cook/execution/dlq.rs:52-54"
    }
  ],
  "positive_aspects": [
    "Comprehensive flow diagram with Mermaid showing DLQ failure handling",
    "Detailed DLQ item structure with annotated JSON examples",
    "Proper use of MkDocs Material features (admonitions, tabs, code annotations)",
    "Clear warning about stub implementation status for CLI commands",
    "Well-documented storage internals with backward compatibility explanation",
    "Good cross-references to related documentation pages",
    "Complete best practices section with practical guidance",
    "Accurate source code references throughout the document"
  ],
  "improvement_suggestions": [
    "Add CommitValidationFailed to ErrorType enum documentation under 'Execution Errors' tab",
    "Document the error_context field in FailureDetail structure",
    "Consider adding a visual diagram showing the relationship between GlobalStorage and DLQStorage paths"
  ],
  "cross_references": [
    {
      "link": "./checkpoint-and-resume.md",
      "status": "valid"
    },
    {
      "link": "./event-tracking.md",
      "status": "valid"
    },
    {
      "link": "../workflow-basics/error-handling.md",
      "status": "valid"
    },
    {
      "link": "../mapreduce-worktree-architecture.md",
      "status": "valid"
    },
    {
      "link": "../retry-configuration/retry-metrics-and-observability.md",
      "status": "valid"
    }
  ],
  "validation_results": {
    "internal_links_checked": 5,
    "broken_links_found": 0,
    "all_links_valid": true
  },
  "metadata": {
    "analyzed_at": "2025-12-27T19:15:00Z",
    "feature_inventory": ".prodigy/mkdocs-analysis/features.json",
    "topics_covered": [
      "DLQ storage",
      "DeadLetteredItem structure",
      "FailureDetail",
      "ErrorType enum",
      "WorktreeArtifacts",
      "CLI commands",
      "Debugging",
      "MapReduce integration",
      "Best practices"
    ],
    "validation_focus": "Auto-discovered page - check for drift and enhance with visual features"
  }
}
