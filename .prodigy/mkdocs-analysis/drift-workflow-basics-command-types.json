{
  "item_type": "section-page",
  "section_id": "workflow-basics",
  "section_title": "Workflow Basics",
  "page_id": "command-types",
  "page_title": "Command Types",
  "page_file": "docs/workflow-basics/command-types.md",
  "feature_mappings": [],
  "drift_detected": true,
  "severity": "critical",
  "quality_assessment": "Page does not exist - critical documentation gap for core feature",
  "issues": [
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "Entire Page",
      "description": "Documentation page does not exist - this is a critical gap as command types are fundamental to Prodigy workflows",
      "feature_reference": "command_types",
      "fix_suggestion": "Create comprehensive documentation covering all six command types: claude, shell, goal_seek, foreach, write_file, and validate",
      "source_reference": "src/config/command.rs:WorkflowStepCommand (lines 319-401)"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Claude Commands",
      "description": "No documentation for 'claude:' command syntax and capabilities",
      "feature_reference": "command_types.claude",
      "fix_suggestion": "Document claude command syntax, variable interpolation, slash command execution, JSON streaming control, and commit tracking. Include examples of basic usage and variable interpolation.",
      "source_reference": "src/config/command.rs:324, features.json:95-102"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Shell Commands",
      "description": "No documentation for 'shell:' command syntax and capabilities",
      "feature_reference": "command_types.shell",
      "fix_suggestion": "Document shell command execution, output capture formats (string, json, lines, number, boolean), stream selection (stdout, stderr, both), conditional execution (on_failure, on_success), and timeout configuration. Include examples showing output capture and conditional execution.",
      "source_reference": "src/config/command.rs:328, features.json:104-112"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Goal-Seeking Commands",
      "description": "No documentation for 'goal_seek:' command syntax and capabilities",
      "feature_reference": "command_types.goal_seek",
      "fix_suggestion": "Document goal-seeking workflow for iterative refinement, score-based validation, maximum attempt limits, success threshold configuration, timeout support, and convergence detection. Include real-world examples from workflows/goal-seeking-examples.yml showing test coverage improvement, performance optimization, and code quality improvement use cases.",
      "source_reference": "src/config/command.rs:340, features.json:114-122, workflows/goal-seeking-examples.yml"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Foreach Commands",
      "description": "No documentation for 'foreach:' command syntax and parallel iteration capabilities",
      "feature_reference": "command_types.foreach",
      "fix_suggestion": "Document foreach loop syntax for simple parallel iteration, static list iteration, command output as input, parallel execution configuration (boolean or count), item limit, and error handling. Include examples showing both list-based and command-based input sources with parallel configuration.",
      "source_reference": "src/config/command.rs:344, features.json:124-131, src/cook/execution/foreach_tests.rs"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Write File Commands",
      "description": "No documentation for 'write_file:' command syntax and file writing capabilities",
      "feature_reference": "command_types.write_file",
      "fix_suggestion": "Document write_file command for creating files with variable interpolation, format support (text, JSON, YAML), directory creation, and file permissions control. Include example showing JSON format writing from workflows/debtmap-reduce.yml.",
      "source_reference": "src/config/command.rs:348, features.json:140-148, workflows/debtmap-reduce.yml:105-108"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Validate Commands",
      "description": "No documentation for 'validate:' command for implementation completeness validation",
      "feature_reference": "command_types.validate",
      "fix_suggestion": "Document validate command syntax for automated validation execution and success criteria checking. Explain how it differs from goal_seek validation.",
      "source_reference": "src/config/command.rs:380, features.json:133-139"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Common Parameters",
      "description": "No documentation for common command parameters that work across all command types",
      "feature_reference": "command_types",
      "fix_suggestion": "Document shared command parameters: id (for referencing outputs), commit_required (default false), timeout, when (conditional execution), capture_output, capture_format, capture_streams, output_file, on_failure, on_success. Show how these parameters apply to different command types.",
      "source_reference": "src/config/command.rs:351-401"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Deprecated Commands",
      "description": "No documentation noting deprecated 'test:' command syntax",
      "feature_reference": "command_types",
      "fix_suggestion": "Add deprecation notice explaining that 'test:' command is deprecated in favor of 'shell:' with 'on_failure:' handler. Show migration example from old to new syntax.",
      "source_reference": "src/config/command.rs:335, 446-463"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Command Combinations",
      "description": "No examples showing how different command types work together in workflows",
      "feature_reference": "command_types",
      "fix_suggestion": "Include comprehensive workflow examples showing: 1) Shell command with Claude on_failure handler (coverage-simplified.yml:15-19), 2) Nested on_success handlers (complex-build-pipeline.yml:8-13), 3) Goal-seeking with validation (goal-seeking-examples.yml), 4) Sequential command flow with output capture and variable interpolation",
      "source_reference": "workflows/coverage-simplified.yml, workflows/complex-build-pipeline.yml, workflows/goal-seeking-examples.yml"
    }
  ],
  "positive_aspects": [],
  "improvement_suggestions": [
    "Start with a command types overview table showing syntax and use cases for quick reference",
    "Organize by command type with clear sections and sub-sections",
    "Include practical examples from real workflows (coverage, goal-seeking, build pipelines)",
    "Add a comparison section explaining when to use each command type",
    "Include troubleshooting tips for common command issues",
    "Cross-reference to related pages: variables.md for variable interpolation, error-handling.md for on_failure/on_success, conditional-execution.md for when clauses",
    "Use MkDocs Material admonitions for tips, warnings about deprecated syntax, and best practices",
    "Include syntax highlighting for YAML examples",
    "Add code annotations for complex examples explaining each parameter"
  ],
  "cross_references": [
    "variables",
    "error-handling",
    "conditional-execution",
    "environment"
  ],
  "metadata": {
    "analyzed_at": "2025-11-11T10:00:00Z",
    "feature_inventory": ".prodigy/mkdocs-analysis/features.json",
    "topics_covered": [
      "Shell commands",
      "Claude commands",
      "Goal-seeking",
      "Foreach"
    ],
    "validation_focus": "Check all command types are documented"
  }
}
