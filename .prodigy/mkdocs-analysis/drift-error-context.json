{
  "item_type": "page",
  "page_id": "error-context",
  "page_title": "error context",
  "page_file": "docs/stillwater-patterns/error-context.md",
  "drift_detected": true,
  "severity": "medium",
  "quality_assessment": "Page documents ContextError pattern correctly but examples show proposed implementation rather than fully integrated code. The actual implementation exists but differs slightly from examples shown.",
  "issues": [
    {
      "type": "outdated_information",
      "severity": "medium",
      "section": "Current Problem",
      "description": "File path reference is outdated - executor.rs no longer at lines 400-598",
      "current_content": "**Location**: `src/cook/execution/mapreduce/coordination/executor.rs:400-598`",
      "should_be": "Location reference should be updated or removed as specific line numbers change frequently",
      "fix_suggestion": "Remove specific line numbers or use a more stable reference like function name",
      "source_reference": "src/cook/execution/mapreduce/coordination/executor.rs:execute_setup_phase"
    },
    {
      "type": "incomplete_explanation",
      "severity": "medium",
      "section": "Stillwater Solution",
      "description": "Example shows manual ContextError::new().context() usage but actual codebase uses ResultExt trait extension methods",
      "current_content": "Uses ContextError::new(e).context(format!(...))",
      "should_be": "Should show ResultExt trait with .context() and .with_context() methods as used in production code",
      "fix_suggestion": "Update example to show ResultExt trait usage from prodigy::cook::error::ResultExt",
      "source_reference": "src/cook/error/ext.rs:20-68"
    },
    {
      "type": "incomplete_explanation",
      "severity": "low",
      "section": "DLQ Integration",
      "description": "DLQ struct shown differs from actual implementation - actual DeadLetteredItem has more fields",
      "current_content": "Shows simplified DeadLetteredItem with 5 fields",
      "should_be": "Actual struct has 11 fields including worktree_artifacts, reprocess_eligible, manual_review_required",
      "fix_suggestion": "Either update to show full struct or explicitly note this is a simplified view",
      "source_reference": "src/cook/execution/dlq.rs:32-42"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "DLQ Integration",
      "description": "Missing documentation on error context extraction from formatted ContextError Display output",
      "feature_reference": "extract_error_context function in dlq_integration.rs",
      "fix_suggestion": "Add section explaining how error context is parsed from ContextError's Display format (Context: -> lines)",
      "source_reference": "src/cook/execution/mapreduce/dlq_integration.rs:136-184"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Usage",
      "description": "Missing documentation on ContextResult type alias for cleaner function signatures",
      "feature_reference": "ContextResult<T, E> = Result<T, ContextError<E>>",
      "fix_suggestion": "Add section showing ContextResult type alias and when to use it",
      "source_reference": "src/cook/error/ext.rs:83-97"
    }
  ],
  "positive_aspects": [
    "Correctly explains the core problem of losing error context in MapReduce failures",
    "Shows clear before/after comparison demonstrating the value proposition",
    "Documents DLQ integration for preserving context in dead-lettered items",
    "Includes realistic error output examples showing context trail format",
    "Impact metrics are compelling and explain the value well"
  ],
  "improvement_suggestions": [
    "Add code example using ResultExt trait extension methods (.context(), .with_context())",
    "Include a section on lazy context evaluation for performance (with_context closure)",
    "Add cross-reference to error-accumulation.md for related validation patterns",
    "Update DLQ example to show actual FailureDetail struct with error_context field",
    "Add example of viewing context in 'prodigy dlq show' output",
    "Consider adding MkDocs Material admonitions for tips and warnings"
  ],
  "cross_references": [
    "error-accumulation",
    "index",
    "testability"
  ],
  "internal_links_validated": true,
  "internal_links_status": {
    "links_found": 0,
    "broken_links": 0,
    "details": "No internal markdown links found in this file"
  },
  "metadata": {
    "analyzed_at": "2025-12-27T12:00:00Z",
    "feature_inventory": ".prodigy/mkdocs-analysis/features.json",
    "topics_covered": ["ContextError", "error context", "DLQ integration", "debugging", "MapReduce failures"],
    "validation_focus": "Auto-discovered page - check for drift and enhance with visual features",
    "stillwater_integration": "Uses stillwater::ContextError re-exported via prodigy::cook::error",
    "related_specs": ["Spec 101 - Error Handling", "Spec 168 - Error Handling Patterns"]
  }
}
