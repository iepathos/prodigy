{
  "item_type": "section-page",
  "section_id": "workflow-basics",
  "section_title": "Workflow Basics",
  "page_id": "environment",
  "page_title": "Environment Variables",
  "page_file": "docs/workflow-basics/environment.md",
  "feature_mappings": [
    "environment_management.global_env",
    "environment_management.secrets",
    "environment_management.profiles",
    "environment_management.env_files"
  ],
  "drift_detected": true,
  "severity": "critical",
  "quality_assessment": "Documentation page does not exist. This is a critical gap as environment variable management is a core feature (Spec 120) with comprehensive capabilities for secrets, profiles, and .env file support.",
  "issues": [
    {
      "type": "missing_content",
      "severity": "critical",
      "section": "Entire Page",
      "description": "Documentation page 'docs/workflow-basics/environment.md' does not exist. Environment variable management is a major feature with global env, secrets masking, profiles, and .env file support.",
      "feature_reference": "environment_management",
      "fix_suggestion": "Create comprehensive documentation page covering: (1) Defining environment variables in workflow YAML, (2) Secret masking for sensitive data, (3) Profile support for different environments (dev/staging/prod), (4) Loading variables from .env files, (5) Variable interpolation syntax ($VAR and ${VAR}), (6) Variable availability across workflow phases (setup/map/reduce/merge), (7) Override precedence, (8) Security best practices",
      "source_reference": "CLAUDE.md:Spec 120 - Environment Variables"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Global Environment Variables",
      "description": "No documentation for workflow-wide environment variables with plain key-value pairs and variable interpolation",
      "feature_reference": "environment_management.global_env",
      "fix_suggestion": "Document the 'env:' block at workflow root with examples of plain variables and how they inherit to all commands",
      "source_reference": "CLAUDE.md:289-295"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Secrets Management",
      "description": "No documentation for secure credential management with automatic masking in logs",
      "feature_reference": "environment_management.secrets",
      "fix_suggestion": "Document secret variables with 'secret: true' flag, explain automatic masking behavior in command output, error messages, event logs, and checkpoints. Include example showing '***' masking",
      "source_reference": "CLAUDE.md:296-315"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Profile Support",
      "description": "No documentation for context-specific configurations with multiple named profiles",
      "feature_reference": "environment_management.profiles",
      "fix_suggestion": "Document profile syntax with default and named profile values, runtime activation via --profile flag, and fallback behavior. Include example with dev/staging/prod profiles",
      "source_reference": "CLAUDE.md:316-335"
    },
    {
      "type": "missing_content",
      "severity": "high",
      "section": "Environment Files",
      "description": "No documentation for loading variables from .env files",
      "feature_reference": "environment_management.env_files",
      "fix_suggestion": "Document .env file support with multiple file loading, standard format, and variable override precedence",
      "source_reference": "CLAUDE.md:336-360"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Variable Interpolation",
      "description": "No examples showing both $VAR and ${VAR} syntax support in different contexts",
      "feature_reference": "environment_management.global_env",
      "fix_suggestion": "Document both variable interpolation syntaxes with examples in shell commands, Claude commands, and map/reduce phases. Explain when to use bracketed syntax for clarity",
      "source_reference": "CLAUDE.md:360-380"
    },
    {
      "type": "missing_content",
      "severity": "medium",
      "section": "Usage in Workflow Phases",
      "description": "No documentation showing environment variable availability in setup, map, reduce, and merge phases",
      "feature_reference": "environment_management",
      "fix_suggestion": "Include examples demonstrating environment variable usage in all workflow phases: setup commands, map agent templates, reduce aggregation, and merge workflows",
      "source_reference": "CLAUDE.md:380-430"
    },
    {
      "type": "missing_content",
      "severity": "low",
      "section": "Best Practices",
      "description": "No best practices documented for environment variable usage",
      "feature_reference": "environment_management",
      "fix_suggestion": "Add best practices section covering: (1) Use secrets for sensitive data, (2) Parameterize project-specific values, (3) Document required variables, (4) Use profiles for environments, (5) Prefer ${VAR} syntax for explicitness",
      "source_reference": "CLAUDE.md:430-440"
    }
  ],
  "positive_aspects": [],
  "improvement_suggestions": [
    "Create page structure with clear sections: Overview, Defining Variables, Secrets, Profiles, Environment Files, Interpolation Syntax, Usage Examples, Best Practices",
    "Include complete YAML examples showing all features together",
    "Add troubleshooting section for common issues (variable not found, interpolation not working, secret not masked)",
    "Cross-reference variable system documentation for advanced interpolation features",
    "Include security considerations and common pitfalls",
    "Show real-world examples from common use cases (API keys, database URLs, feature flags)"
  ],
  "cross_references": [
    "variable-system",
    "workflow-structure",
    "mapreduce/overview"
  ],
  "metadata": {
    "analyzed_at": "2025-11-11T21:23:18Z",
    "feature_inventory": ".prodigy/mkdocs-analysis/features.json",
    "topics_covered": [],
    "validation_focus": "Check environment variable configuration, secrets masking, and profile usage are documented",
    "page_exists": false
  }
}
