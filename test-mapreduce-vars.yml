name: test-mapreduce-variables
mode: mapreduce

# Simple test workflow to verify variable substitution

map:
  input: test-data.json
  json_path: "$.items[*]"
  
  agent_template:
    commands:
      - shell: "echo 'Processing item: ${item.id}'"
        capture_output: true
  
  max_parallel: 2
  max_items: 3

reduce:
  commands:
    - shell: |
        echo "Map phase results:"
        echo "  Total items: ${map.total}"
        echo "  Successful: ${map.successful}"
        echo "  Failed: ${map.failed}"
    
    - shell: "echo 'Test completed successfully with ${map.successful} items processed'"