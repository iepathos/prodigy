# Test coverage improvement workflow with automatic test debugging
# Identifies coverage gaps, implements tests, and automatically fixes failing tests
- claude: "/mmm-coverage"
  id: coverage
  commit_required: true
  outputs:
    spec:
      file_pattern: "*-coverage-improvements.md"
  analysis:
    max_cache_age: 300

- claude: "/mmm-implement-spec ${coverage.spec}"
  commit_required: true

- test:
    command: "just test"
    on_failure:
      claude: "/mmm-debug-test-failure --spec ${coverage.spec} --output ${test.output}"
      max_attempts: 3
      fail_workflow: false  # Continue workflow even if tests can't be fixed

- claude: "/mmm-lint"  # Defaults to commit_required: false
