# Default MMM playbook - The classic three-step improvement cycle
# This replaces the previously hardcoded workflow in mmm cook
#
# Usage: mmm cook default.yml --path /path/to/repo

workflow:
  commands:
    - name: mmm-code-review
      id: review
      outputs:
        spec: 
          extract_from: 
            git_commit: 
              file_pattern: "specs/temp/iteration-*-improvements.md"
    
    - name: mmm-implement-spec
      inputs:
        spec: 
          from: "${review.spec}"
          pass_as:
            argument:
              position: 0
    
    - name: mmm-lint

# This playbook implements the classic MMM improvement cycle:
# 1. Analyze code and generate improvement spec (committed to git)
# 2. Extract spec from git and implement the improvements
# 3. Format, lint, and test the changes
#
# The variable chaining ensures mmm-implement-spec receives the spec
# generated by mmm-code-review, replacing the previous hardcoded behavior.