<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Command Types - Prodigy Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="AI-powered workflow orchestration for development teams">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Prodigy Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/iepathos/prodigy" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/iepathos/prodigy/edit/main/book/src/workflow-basics/command-types.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="command-types"><a class="header" href="#command-types">Command Types</a></h2>
<p>Prodigy supports several types of commands in workflows. <strong>Each command step must specify exactly one command type</strong> - they are mutually exclusive.</p>
<h3 id="shell-commands"><a class="header" href="#shell-commands">Shell Commands</a></h3>
<p>Execute shell commands during workflow execution.</p>
<p><strong>Source</strong>: src/config/command.rs:328</p>
<p><strong>Syntax</strong>:</p>
<pre><code class="language-yaml">- shell: "command to execute"
  timeout: 300                    # Optional: timeout in seconds
  capture_output: true            # Optional: capture command output
  capture_format: "json"          # Optional: json, text, lines
  capture_streams: "both"         # Optional: stdout, stderr, both
  output_file: "results.txt"      # Optional: redirect output to file
  on_failure:                     # Optional: commands to run on failure
    claude: "/debug-failure"
  on_success:                     # Optional: commands to run on success
    shell: "echo 'Success!'"
  when: "variable == 'value'"     # Optional: conditional execution
</code></pre>
<p><strong>Fields</strong>:</p>
<ul>
<li><code>shell</code> (required): The shell command to execute</li>
<li><code>timeout</code> (optional): Maximum execution time in seconds</li>
<li><code>capture_output</code> (optional): Boolean or variable name to capture output to</li>
<li><code>capture_format</code> (optional): Format for captured output (json, text, lines)</li>
<li><code>capture_streams</code> (optional): Which streams to capture (stdout, stderr, both)</li>
<li><code>output_file</code> (optional): File path to redirect output to</li>
<li><code>on_failure</code> (optional): Nested command to execute if shell command fails</li>
<li><code>on_success</code> (optional): Nested command to execute if shell command succeeds</li>
<li><code>when</code> (optional): Conditional expression - command only runs if true</li>
</ul>
<p><strong>Example</strong> (from workflows/fix-files-mapreduce.yml:36):</p>
<pre><code class="language-yaml">- shell: "cargo check --lib 2&gt;&amp;1 | grep -E '(error|warning)' | head -10 || echo 'No errors'"
  capture_output: true
</code></pre>
<p><strong>Example with on_failure</strong> (from workflows/coverage.yml:13):</p>
<pre><code class="language-yaml">- shell: "just test"
  on_failure:
    claude: "/prodigy-debug-test-failure --spec ${coverage.spec} --output ${shell.output}"
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Running build commands</li>
<li>Executing tests</li>
<li>File operations</li>
<li>Running analysis tools</li>
<li>Generating data files</li>
</ul>
<h3 id="claude-commands"><a class="header" href="#claude-commands">Claude Commands</a></h3>
<p>Execute Claude CLI commands via Claude Code.</p>
<p><strong>Source</strong>: src/config/command.rs:324</p>
<p><strong>Syntax</strong>:</p>
<pre><code class="language-yaml">- claude: "/command-name args"
  id: "command_id"                # Optional: identifier for referencing outputs
  commit_required: true           # Optional: expect git commit (default: false)
  timeout: 600                    # Optional: timeout in seconds
  outputs:                        # Optional: declare outputs for downstream use
    spec:
      file_pattern: "*.md"
  when: "condition"               # Optional: conditional execution
  on_failure:                     # Optional: commands to run on failure
    claude: "/fix-issue"
  on_success:                     # Optional: commands to run on success
    shell: "echo 'Done'"
</code></pre>
<p><strong>Fields</strong>:</p>
<ul>
<li><code>claude</code> (required): The Claude command string with arguments</li>
<li><code>id</code> (optional): Unique identifier for this command in the workflow</li>
<li><code>commit_required</code> (optional): Whether command is expected to create git commits (default: false)</li>
<li><code>timeout</code> (optional): Maximum execution time in seconds</li>
<li><code>outputs</code> (optional): Declare outputs that can be referenced by other commands</li>
<li><code>when</code> (optional): Conditional expression for execution</li>
<li><code>on_failure</code> (optional): Nested command to execute on failure</li>
<li><code>on_success</code> (optional): Nested command to execute on success</li>
</ul>
<p><strong>Example with outputs</strong> (from workflows/coverage.yml:3):</p>
<pre><code class="language-yaml">- claude: "/prodigy-coverage"
  id: coverage
  commit_required: true
  outputs:
    spec:
      file_pattern: "*-coverage-improvements.md"

- claude: "/prodigy-implement-spec ${coverage.spec}"
  commit_required: true
</code></pre>
<p><strong>Example in MapReduce</strong> (from workflows/fix-files-mapreduce.yml:31):</p>
<pre><code class="language-yaml">- claude: "/analyze-and-fix-file ${item.path} --complexity ${item.complexity}"
  capture_output: true
  timeout: 300
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Running custom Claude commands</li>
<li>Code analysis and generation</li>
<li>Implementing specifications</li>
<li>Debugging test failures</li>
<li>Code review and linting</li>
</ul>
<h3 id="goal-seek-commands"><a class="header" href="#goal-seek-commands">Goal Seek Commands</a></h3>
<p>Iteratively refine implementation until validation threshold is met.</p>
<p><strong>Source</strong>: src/cook/goal_seek/mod.rs:15-41</p>
<p><strong>Syntax</strong>:</p>
<pre><code class="language-yaml">- goal_seek:
    goal: "Human-readable goal description"
    claude: "/command-for-refinement"  # Either claude or shell required
    shell: "refinement-command"        # Either claude or shell required
    validate: "validation-command"     # Required: returns score 0-100
    threshold: 90                      # Required: success threshold (0-100)
    max_attempts: 5                    # Required: maximum refinement attempts
    timeout_seconds: 600               # Optional: timeout for entire operation
    fail_on_incomplete: true           # Optional: fail workflow if goal not met
  commit_required: true
</code></pre>
<p><strong>Fields</strong>:</p>
<ul>
<li><code>goal</code> (required): Human-readable description of what to achieve</li>
<li><code>claude</code> (optional): Claude command for refinement attempts</li>
<li><code>shell</code> (optional): Shell command for refinement attempts (use claude OR shell)</li>
<li><code>validate</code> (required): Command that returns validation score (0-100)</li>
<li><code>threshold</code> (required): Minimum score required for success (0-100)</li>
<li><code>max_attempts</code> (required): Maximum number of refinement attempts</li>
<li><code>timeout_seconds</code> (optional): Timeout for the entire goal-seeking operation</li>
<li><code>fail_on_incomplete</code> (optional): Whether to fail workflow if goal is not met</li>
</ul>
<p><strong>Validation Output Format</strong>:
The validate command must output a line containing <code>score: &lt;number&gt;</code> where number is 0-100:</p>
<pre><code>score: 85
</code></pre>
<p><strong>Result Types</strong>:</p>
<ul>
<li><code>Complete</code>: Goal achieved (score &gt;= threshold)</li>
<li><code>Incomplete</code>: Maximum attempts reached without achieving threshold</li>
<li><code>Failed</code>: Error during execution</li>
</ul>
<p><strong>Example</strong> (from workflows/implement-goal.yml:8):</p>
<pre><code class="language-yaml">- goal_seek:
    goal: "Implement specification: $ARG"
    claude: "/prodigy-implement-spec $ARG"
    validate: "git diff --stat | grep -q '.*\\.rs' &amp;&amp; echo 'score: 100' || echo 'score: 0'"
    threshold: 90
    max_attempts: 3
    timeout_seconds: 600
  commit_required: true
</code></pre>
<p><strong>Example with shell refinement</strong> (from workflows/goal-seeking-examples.yml:7):</p>
<pre><code class="language-yaml">- goal_seek:
    goal: "Achieve 90% test coverage"
    shell: "cargo tarpaulin --out Lcov"
    validate: "cargo tarpaulin --print-summary 2&gt;/dev/null | grep 'Coverage' | sed 's/.*Coverage=\\([0-9]*\\).*/score: \\1/'"
    threshold: 90
    max_attempts: 5
    timeout_seconds: 300
    fail_on_incomplete: true
  commit_required: true
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Iteratively improving code quality</li>
<li>Achieving test coverage thresholds</li>
<li>Performance optimization</li>
<li>Fixing linting issues</li>
<li>Implementing specifications completely</li>
</ul>
<h3 id="foreach-commands"><a class="header" href="#foreach-commands">Foreach Commands</a></h3>
<p>Iterate over a list of items, executing commands for each item in parallel or sequentially.</p>
<p><strong>Source</strong>: src/config/command.rs:344, src/config/command.rs:188-211</p>
<p><strong>Syntax</strong>:</p>
<pre><code class="language-yaml">- foreach:
    items: ["item1", "item2"]       # Static list
    # OR
    items: "shell-command"          # Command that produces items
    do:                             # Commands to execute per item
      - claude: "/process ${item}"
      - shell: "test ${item}"
    parallel: 5                     # Optional: number of parallel workers
    continue_on_error: true         # Optional: continue if item fails
    max_items: 100                  # Optional: limit number of items
</code></pre>
<p><strong>Input Types</strong>:</p>
<ol>
<li><strong>Static List</strong>: Array of strings directly in YAML</li>
<li><strong>Command Output</strong>: Shell command whose output produces item list</li>
</ol>
<p><strong>Fields</strong>:</p>
<ul>
<li><code>items</code> (required): Either a static list or a command to generate items</li>
<li><code>do</code> (required): List of commands to execute for each item</li>
<li><code>parallel</code> (optional): Number of parallel workers (boolean or count)
<ul>
<li><code>true</code>: Default parallel count</li>
<li><code>false</code>: Sequential execution</li>
<li>Number: Specific parallel count</li>
</ul>
</li>
<li><code>continue_on_error</code> (optional): Continue processing other items if one fails (default: false)</li>
<li><code>max_items</code> (optional): Maximum number of items to process</li>
</ul>
<p><strong>Variable Access</strong>:
Inside <code>do</code> commands, use <code>${item}</code> to reference the current item.</p>
<p><strong>Example</strong> (from workflows/fix-files-mapreduce.yml - conceptual):</p>
<pre><code class="language-yaml">- foreach:
    items: "find src -name '*.rs' -type f"
    do:
      - claude: "/analyze-file ${item}"
      - shell: "rustfmt ${item}"
    parallel: 4
    continue_on_error: true
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Processing multiple files</li>
<li>Running operations on a list of identifiers</li>
<li>Batch operations with parallelism</li>
<li>Conditional processing of items</li>
</ul>
<h3 id="write-file-commands"><a class="header" href="#write-file-commands">Write File Commands</a></h3>
<p>Write content to files with format validation and directory creation.</p>
<p><strong>Source</strong>: src/config/command.rs:348, src/config/command.rs:279-317</p>
<p><strong>Syntax</strong>:</p>
<pre><code class="language-yaml">- write_file:
    path: "output/file.json"        # Required: file path (supports variables)
    content: "${map.results}"       # Required: content to write (supports variables)
    format: json                    # Optional: text, json, yaml (default: text)
    mode: "0644"                    # Optional: file permissions (default: 0644)
    create_dirs: true               # Optional: create parent directories (default: false)
</code></pre>
<p><strong>Fields</strong>:</p>
<ul>
<li><code>path</code> (required): File path to write to (supports variable interpolation)</li>
<li><code>content</code> (required): Content to write (supports variable interpolation)</li>
<li><code>format</code> (optional): Output format - text, json, or yaml (default: text)
<ul>
<li><code>text</code>: Write content as-is</li>
<li><code>json</code>: Validate JSON and pretty-print</li>
<li><code>yaml</code>: Validate YAML and format</li>
</ul>
</li>
<li><code>mode</code> (optional): File permissions in octal format (default: “0644”)</li>
<li><code>create_dirs</code> (optional): Create parent directories if they don’t exist (default: false)</li>
</ul>
<p><strong>Format Types</strong> (src/config/command.rs:301-313):</p>
<ul>
<li><code>Text</code>: No processing, write content directly</li>
<li><code>Json</code>: Validate JSON syntax and pretty-print</li>
<li><code>Yaml</code>: Validate YAML syntax and format</li>
</ul>
<p><strong>Example</strong> (from workflows/debtmap-reduce.yml:105):</p>
<pre><code class="language-yaml">- write_file:
    path: ".prodigy/map-results.json"
    content: "${map.results}"
    format: json
    create_dirs: true
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Saving workflow results to files</li>
<li>Generating configuration files</li>
<li>Writing JSON/YAML data with validation</li>
<li>Creating reports and logs</li>
<li>Persisting intermediate data</li>
</ul>
<h3 id="validation-commands"><a class="header" href="#validation-commands">Validation Commands</a></h3>
<p>Validate implementation completeness using shell or Claude commands with threshold-based checking.</p>
<p><strong>Source</strong>: src/cook/workflow/validation.rs:12-50</p>
<p><strong>Syntax</strong>:</p>
<pre><code class="language-yaml">- validate:
    shell: "validation-command"         # Either shell or claude or commands
    claude: "/validate-command"         # Either shell or claude or commands
    commands:                           # Or array of commands for multi-step validation
      - shell: "step1"
      - claude: "/step2"
    expected_schema: {...}              # Optional: JSON schema for validation output
    threshold: 100                      # Optional: completion threshold % (default: 100)
    timeout: 300                        # Optional: timeout in seconds
    result_file: "validation.json"      # Optional: where validation results are written
    on_incomplete:                      # Optional: commands to run if validation fails
      claude: "/fix-gaps ${validation.gaps}"
      max_attempts: 3
</code></pre>
<p><strong>Fields</strong>:</p>
<ul>
<li><code>shell</code> (optional): Shell command for validation (deprecated, use <code>commands</code>)</li>
<li><code>claude</code> (optional): Claude command for validation</li>
<li><code>commands</code> (optional): Array of commands for multi-step validation</li>
<li><code>expected_schema</code> (optional): JSON schema that validation output must match</li>
<li><code>threshold</code> (optional): Minimum completion percentage required (default: 100)</li>
<li><code>timeout</code> (optional): Timeout for validation command in seconds</li>
<li><code>result_file</code> (optional): File where validation results are written</li>
<li><code>on_incomplete</code> (optional): Configuration for handling incomplete implementations
<ul>
<li>Nested command to execute if validation fails</li>
<li><code>max_attempts</code>: Maximum retry attempts</li>
</ul>
</li>
</ul>
<p><strong>Validation Output Format</strong>:
Validation commands should output JSON matching this structure:</p>
<pre><code class="language-json">{
  "complete": true,
  "score": 100,
  "gaps": [],
  "incomplete_specs": []
}
</code></pre>
<p><strong>Example with result_file</strong> (from workflows/implement.yml:8):</p>
<pre><code class="language-yaml">validate:
  claude: "/prodigy-validate-spec $ARG --output .prodigy/validation-result.json"
  result_file: ".prodigy/validation-result.json"
  threshold: 100
  on_incomplete:
    claude: "/prodigy-complete-spec $ARG --gaps ${validation.gaps}"
</code></pre>
<p><strong>Example with commands array</strong> (from workflows/debtmap.yml:13):</p>
<pre><code class="language-yaml">validate:
  commands:
    - claude: "/prodigy-validate-debtmap-plan --before .prodigy/debtmap-before.json --plan .prodigy/IMPLEMENTATION_PLAN.md --output .prodigy/plan-validation.json"
  result_file: ".prodigy/plan-validation.json"
  threshold: 75
  on_incomplete:
    claude: "/fix-plan-gaps --gaps ${validation.gaps}"
    max_attempts: 3
</code></pre>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Verifying specification completeness</li>
<li>Checking implementation against requirements</li>
<li>Validating test coverage</li>
<li>Ensuring documentation quality</li>
<li>Multi-step validation pipelines</li>
</ul>
<h3 id="common-fields"><a class="header" href="#common-fields">Common Fields</a></h3>
<p>Several fields are available across all command types:</p>
<p><strong>Source</strong>: src/config/command.rs:320-401</p>
<ul>
<li><code>id</code> (string): Unique identifier for referencing command outputs</li>
<li><code>timeout</code> (number): Maximum execution time in seconds</li>
<li><code>when</code> (string): Conditional execution expression</li>
<li><code>on_success</code> (command): Command to run on successful execution</li>
<li><code>on_failure</code> (command): Command to run on failed execution</li>
<li><code>capture_output</code> (boolean or string): Capture command output (true/false or variable name)</li>
<li><code>capture_format</code> (string): Format for captured output (json, text, lines)</li>
<li><code>capture_streams</code> (string): Which streams to capture (stdout, stderr, both)</li>
<li><code>output_file</code> (string): File to redirect output to</li>
</ul>
<h3 id="command-exclusivity"><a class="header" href="#command-exclusivity">Command Exclusivity</a></h3>
<p>Each workflow step must specify <strong>exactly one</strong> command type. You cannot combine multiple command types in a single step:</p>
<p><strong>Valid</strong>:</p>
<pre><code class="language-yaml">- shell: "cargo test"        # ✓ Only shell command
- claude: "/lint"            # ✓ Only Claude command
- goal_seek:                 # ✓ Only goal_seek command
    goal: "Fix tests"
    validate: "..."
</code></pre>
<p><strong>Invalid</strong>:</p>
<pre><code class="language-yaml">- shell: "cargo test"        # ✗ Cannot combine shell and claude
  claude: "/lint"

- goal_seek: {...}           # ✗ Cannot combine goal_seek and foreach
  foreach: {...}
</code></pre>
<p><strong>Enforcement</strong>: src/config/command.rs:465-476</p>
<h3 id="deprecated-test-command"><a class="header" href="#deprecated-test-command">Deprecated: Test Command</a></h3>
<p>The <code>test:</code> command syntax is deprecated. Use <code>shell:</code> with <code>on_failure:</code> instead.</p>
<p><strong>Source</strong>: src/config/command.rs:446-463</p>
<p><strong>Old (deprecated)</strong>:</p>
<pre><code class="language-yaml">- test:
    command: "cargo test"
    on_failure:
      claude: "/debug-test"
</code></pre>
<p><strong>New (recommended)</strong>:</p>
<pre><code class="language-yaml">- shell: "cargo test"
  on_failure:
    claude: "/debug-test"
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="available-fields.html">Available Fields</a> - Complete reference of all command fields</li>
<li><a href="../advanced/goal-seeking-operations.html">Goal Seeking Operations</a> - Advanced goal-seeking patterns</li>
<li><a href="../advanced/parallel-iteration-with-foreach.html">Parallel Iteration with Foreach</a> - Foreach best practices</li>
<li><a href="../advanced/implementation-validation.html">Implementation Validation</a> - Validation strategies</li>
<li><a href="../variables/index.html">Variables</a> - Variable interpolation in commands</li>
<li><a href="../error-handling.html">Error Handling</a> - Error handling strategies</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../workflow-basics/available-fields.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../workflow-basics/command-level-options.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../workflow-basics/available-fields.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../workflow-basics/command-level-options.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
