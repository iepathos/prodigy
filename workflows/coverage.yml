# Test coverage improvement workflow with automatic test debugging
# Identifies coverage gaps, implements tests, and automatically fixes failing tests
- claude: "/prodigy-coverage"
  id: coverage
  commit_required: true
  outputs:
    spec:
      file_pattern: "*-coverage-improvements.md"

- claude: "/prodigy-implement-spec ${coverage.spec}"
  commit_required: true

- shell: "just test"
  on_failure:
    claude: "/prodigy-debug-test-failure --spec ${coverage.spec} --output ${shell.output}"
    max_attempts: 3
    fail_workflow: false  # Continue workflow even if tests can't be fixed

- claude: "/prodigy-lint"  # Defaults to commit_required: false

- analyze:
    max_cache_age: 300
    save: true

