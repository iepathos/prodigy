# implement.yml - Example configuration for implementing specifications
# This replaces the old `mmm implement` functionality
#
# Usage examples:
#   mmm cook examples/implement.yml --args "33"
#   mmm cook examples/implement.yml --map "specs/*.md"
#   mmm cook examples/implement.yml --map "specs/temp/*.md" --worktree

# Commands to execute for each specification
# Implement the spec using the $ARG variable which contains:
# - The spec ID extracted from filename when using --map
# - The direct argument value when using --args

- claude: "/mmm-implement-spec $ARG"
  commit_required: true

- shell: "just test"
  on_failure:
    claude: "/mmm-debug-test-failure --spec $ARG --output ${shell.output}"
    max_attempts: 3
    fail_workflow: false  # Continue workflow even if tests can't be fixed

# Run linting and formatting after implementation
- shell: "just fmt-check && just lint"
  on_failure:
    claude: "/mmm-lint ${shell.output}"
    max_attempts: 3
    fail_workflow: false
